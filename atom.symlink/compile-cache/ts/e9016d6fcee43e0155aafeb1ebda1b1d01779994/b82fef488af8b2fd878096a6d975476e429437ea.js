// Some docs
// http://www.html5rocks.com/en/tutorials/webcomponents/customelements/ (look at lifecycle callback methods)
var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var escapeHtml = require("escape-html");
var TsView = (function (_super) {
    __extends(TsView, _super);
    function TsView() {
        _super.apply(this, arguments);
    }
    TsView.prototype.createdCallback = function () {
        var preview = escapeHtml(this.innerText);
        this.innerText = "";
        // Based on markdown editor
        // https://github.com/atom/markdown-preview/blob/2bcbadac3980f1aeb455f7078bd1fdfb4e6fe6b1/lib/renderer.coffee#L111
        var editorElement = this.editorElement = document.createElement('atom-text-editor');
        editorElement.setAttributeNode(document.createAttribute('gutter-hidden'));
        editorElement.removeAttribute('tabindex'); // make read-only
        var editor = this.editor = editorElement.getModel();
        editor.getDecorations({ class: 'cursor-line', type: 'line' })[0].destroy(); // remove the default selection of a line in each editor
        editor.setText(preview);
        var grammar = atom.grammars.grammarForScopeName("source.ts");
        editor.setGrammar(grammar);
        editor.setSoftWrapped(true);
        this.appendChild(editorElement);
    };
    // API
    TsView.prototype.text = function (text) {
        this.editor.setText(escapeHtml(text));
    };
    return TsView;
})(HTMLElement);
exports.TsView = TsView;
document.registerElement('ts-view', TsView);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvc3RlZmFuby8uYXRvbS9wYWNrYWdlcy9hdG9tLXR5cGVzY3JpcHQvbGliL21haW4vYXRvbS9jb21wb25lbnRzL3RzLXZpZXcudHMiLCJzb3VyY2VzIjpbIi9ob21lL3N0ZWZhbm8vLmF0b20vcGFja2FnZXMvYXRvbS10eXBlc2NyaXB0L2xpYi9tYWluL2F0b20vY29tcG9uZW50cy90cy12aWV3LnRzIl0sIm5hbWVzIjpbIlRzVmlldyIsIlRzVmlldy5jb25zdHJ1Y3RvciIsIlRzVmlldy5jcmVhdGVkQ2FsbGJhY2siLCJUc1ZpZXcudGV4dCJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTtBQUNaLDRHQUE0Rzs7Ozs7OztBQUU1RyxJQUFPLFVBQVUsV0FBVyxhQUFhLENBQUMsQ0FBQztBQUUzQyxJQUFhLE1BQU07SUFBU0EsVUFBZkEsTUFBTUEsVUFBb0JBO0lBQXZDQSxTQUFhQSxNQUFNQTtRQUFTQyw4QkFBV0E7SUEwQnZDQSxDQUFDQTtJQXZCR0QsZ0NBQWVBLEdBQWZBO1FBQ0lFLElBQUlBLE9BQU9BLEdBQUdBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLFNBQVNBLENBQUNBLENBQUNBO1FBQ3pDQSxJQUFJQSxDQUFDQSxTQUFTQSxHQUFHQSxFQUFFQSxDQUFDQTtRQUlwQkEsQUFGQUEsMkJBQTJCQTtRQUMzQkEsa0hBQWtIQTtZQUM5R0EsYUFBYUEsR0FBR0EsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsUUFBUUEsQ0FBQ0EsYUFBYUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxDQUFDQTtRQUNwRkEsYUFBYUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxRQUFRQSxDQUFDQSxlQUFlQSxDQUFDQSxlQUFlQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMxRUEsYUFBYUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsRUFBRUEsaUJBQWlCQTtRQUM1REEsSUFBSUEsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBU0EsYUFBY0EsQ0FBQ0EsUUFBUUEsRUFBRUEsQ0FBQ0E7UUFDM0RBLE1BQU1BLENBQUNBLGNBQWNBLENBQUNBLEVBQUVBLEtBQUtBLEVBQUVBLGFBQWFBLEVBQUVBLElBQUlBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLE9BQU9BLEVBQUVBLEVBQUVBLHdEQUF3REE7UUFDcElBLE1BQU1BLENBQUNBLE9BQU9BLENBQUNBLE9BQU9BLENBQUNBLENBQUNBO1FBQ3hCQSxJQUFJQSxPQUFPQSxHQUFTQSxJQUFLQSxDQUFDQSxRQUFRQSxDQUFDQSxtQkFBbUJBLENBQUNBLFdBQVdBLENBQUNBLENBQUFBO1FBQ25FQSxNQUFNQSxDQUFDQSxVQUFVQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQTtRQUMzQkEsTUFBTUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7UUFFNUJBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBO0lBQ3BDQSxDQUFDQTtJQUVERixNQUFNQTtJQUNOQSxxQkFBSUEsR0FBSkEsVUFBS0EsSUFBWUE7UUFDYkcsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7SUFDMUNBLENBQUNBO0lBQ0xILGFBQUNBO0FBQURBLENBQUNBLEFBMUJELEVBQTRCLFdBQVcsRUEwQnRDO0FBMUJZLGNBQU0sR0FBTixNQTBCWixDQUFBO0FBRUssUUFBUyxDQUFDLGVBQWUsQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTb21lIGRvY3Ncbi8vIGh0dHA6Ly93d3cuaHRtbDVyb2Nrcy5jb20vZW4vdHV0b3JpYWxzL3dlYmNvbXBvbmVudHMvY3VzdG9tZWxlbWVudHMvIChsb29rIGF0IGxpZmVjeWNsZSBjYWxsYmFjayBtZXRob2RzKVxuXG5pbXBvcnQgZXNjYXBlSHRtbCA9IHJlcXVpcmUoXCJlc2NhcGUtaHRtbFwiKTtcblxuZXhwb3J0IGNsYXNzIFRzVmlldyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBlZGl0b3JFbGVtZW50O1xuICAgIGVkaXRvcjtcbiAgICBjcmVhdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHZhciBwcmV2aWV3ID0gZXNjYXBlSHRtbCh0aGlzLmlubmVyVGV4dCk7XG4gICAgICAgIHRoaXMuaW5uZXJUZXh0ID0gXCJcIjtcblxuICAgICAgICAvLyBCYXNlZCBvbiBtYXJrZG93biBlZGl0b3JcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2F0b20vbWFya2Rvd24tcHJldmlldy9ibG9iLzJiY2JhZGFjMzk4MGYxYWViNDU1ZjcwNzhiZDFmZGZiNGU2ZmU2YjEvbGliL3JlbmRlcmVyLmNvZmZlZSNMMTExXG4gICAgICAgIHZhciBlZGl0b3JFbGVtZW50ID0gdGhpcy5lZGl0b3JFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXRvbS10ZXh0LWVkaXRvcicpO1xuICAgICAgICBlZGl0b3JFbGVtZW50LnNldEF0dHJpYnV0ZU5vZGUoZG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKCdndXR0ZXItaGlkZGVuJykpO1xuICAgICAgICBlZGl0b3JFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTsgLy8gbWFrZSByZWFkLW9ubHlcbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXMuZWRpdG9yID0gKDxhbnk+ZWRpdG9yRWxlbWVudCkuZ2V0TW9kZWwoKTtcbiAgICAgICAgZWRpdG9yLmdldERlY29yYXRpb25zKHsgY2xhc3M6ICdjdXJzb3ItbGluZScsIHR5cGU6ICdsaW5lJyB9KVswXS5kZXN0cm95KCk7IC8vIHJlbW92ZSB0aGUgZGVmYXVsdCBzZWxlY3Rpb24gb2YgYSBsaW5lIGluIGVhY2ggZWRpdG9yXG4gICAgICAgIGVkaXRvci5zZXRUZXh0KHByZXZpZXcpO1xuICAgICAgICB2YXIgZ3JhbW1hciA9ICg8YW55PmF0b20pLmdyYW1tYXJzLmdyYW1tYXJGb3JTY29wZU5hbWUoXCJzb3VyY2UudHNcIilcbiAgICAgICAgZWRpdG9yLnNldEdyYW1tYXIoZ3JhbW1hcik7XG4gICAgICAgIGVkaXRvci5zZXRTb2Z0V3JhcHBlZCh0cnVlKTtcblxuICAgICAgICB0aGlzLmFwcGVuZENoaWxkKGVkaXRvckVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8vIEFQSVxuICAgIHRleHQodGV4dDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuZWRpdG9yLnNldFRleHQoZXNjYXBlSHRtbCh0ZXh0KSk7XG4gICAgfVxufVxuXG4oPGFueT5kb2N1bWVudCkucmVnaXN0ZXJFbGVtZW50KCd0cy12aWV3JywgVHNWaWV3KTtcbiJdfQ==
//# sourceURL=/home/stefano/.atom/packages/atom-typescript/lib/main/atom/components/ts-view.ts
