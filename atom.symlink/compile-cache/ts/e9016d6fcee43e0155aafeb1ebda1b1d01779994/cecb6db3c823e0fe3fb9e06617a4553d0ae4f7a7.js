var mainPanelView = require('./views/mainPanelView');
var lineMessageView = require('./views/lineMessageView');
var gotoHistory = require('./gotoHistory');
function getTitle(errorCount) {
    var title = '<span class="icon-circuit-board"></span> TypeScript Build';
    if (errorCount > 0) {
        title = title + (" (\n            <span class=\"text-highlight\" style=\"font-weight: bold\"> " + errorCount + " </span>\n            <span class=\"text-error\" style=\"font-weight: bold;\"> error" + (errorCount === 1 ? "" : "s") + " </span>\n        )");
    }
    return title;
}
function setBuildOutput(buildOutput) {
    mainPanelView.panelView.clearBuild();
    if (buildOutput.counts.errors) {
        mainPanelView.panelView.setBuildPanelCount(buildOutput.counts.errors);
    }
    else {
        mainPanelView.panelView.setBuildPanelCount(0);
    }
    // Update the errors list for goto history
    gotoHistory.buildOutput.members = [];
    buildOutput.outputs.forEach(function (output) {
        if (output.success) {
            return;
        }
        output.errors.forEach(function (error) {
            mainPanelView.panelView.addBuild(new lineMessageView.LineMessageView({
                goToLine: function (filePath, line, col) { return gotoHistory.gotoLine(filePath, line, col, gotoHistory.buildOutput); },
                message: error.message,
                line: error.startPos.line + 1,
                col: error.startPos.col,
                file: error.filePath,
                preview: error.preview
            }));
            // Update the errors list for goto history
            gotoHistory.buildOutput.members.push({ filePath: error.filePath, line: error.startPos.line + 1, col: error.startPos.col });
        });
    });
    if (!buildOutput.counts.errors) {
        atom.notifications.addSuccess("Build success");
    }
    else if (buildOutput.counts.emitErrors) {
        atom.notifications.addError("Emits errors: " + buildOutput.counts.emitErrors + " files.");
    }
    else {
        atom.notifications.addWarning('Compile failed but emit succeeded');
    }
}
exports.setBuildOutput = setBuildOutput;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvc3RlZmFuby8uYXRvbS9wYWNrYWdlcy9hdG9tLXR5cGVzY3JpcHQvbGliL21haW4vYXRvbS9idWlsZFZpZXcudHMiLCJzb3VyY2VzIjpbIi9ob21lL3N0ZWZhbm8vLmF0b20vcGFja2FnZXMvYXRvbS10eXBlc2NyaXB0L2xpYi9tYWluL2F0b20vYnVpbGRWaWV3LnRzIl0sIm5hbWVzIjpbImdldFRpdGxlIiwic2V0QnVpbGRPdXRwdXQiXSwibWFwcGluZ3MiOiJBQVNBLElBQU8sYUFBYSxXQUFXLHVCQUF1QixDQUFDLENBQUM7QUFDeEQsSUFBTyxlQUFlLFdBQVcseUJBQXlCLENBQUMsQ0FBQztBQUM1RCxJQUFPLFdBQVcsV0FBVyxlQUFlLENBQUMsQ0FBQztBQUU5QyxTQUFTLFFBQVEsQ0FBQyxVQUFrQjtJQUNoQ0EsSUFBSUEsS0FBS0EsR0FBR0EsMkRBQTJEQSxDQUFDQTtJQUN4RUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsVUFBVUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDakJBLEtBQUtBLEdBQUdBLEtBQUtBLEdBQUdBLGtGQUM4Q0EsVUFBVUEsNkZBQ1JBLFVBQVVBLEtBQUtBLENBQUNBLEdBQUdBLEVBQUVBLEdBQUdBLEdBQUdBLDBCQUN6RkEsQ0FBQ0E7SUFDUEEsQ0FBQ0E7SUFDREEsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0E7QUFDakJBLENBQUNBO0FBR0QsU0FBZ0IsY0FBYyxDQUFDLFdBQXdCO0lBRW5EQyxhQUFhQSxDQUFDQSxTQUFTQSxDQUFDQSxVQUFVQSxFQUFFQSxDQUFDQTtJQUVyQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsV0FBV0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDNUJBLGFBQWFBLENBQUNBLFNBQVNBLENBQUNBLGtCQUFrQkEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7SUFDMUVBLENBQUNBO0lBQ0RBLElBQUlBLENBQUNBLENBQUNBO1FBQ0ZBLGFBQWFBLENBQUNBLFNBQVNBLENBQUNBLGtCQUFrQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7SUFDbERBLENBQUNBO0lBR0RBLEFBREFBLDBDQUEwQ0E7SUFDMUNBLFdBQVdBLENBQUNBLFdBQVdBLENBQUNBLE9BQU9BLEdBQUdBLEVBQUVBLENBQUNBO0lBRXJDQSxXQUFXQSxDQUFDQSxPQUFPQSxDQUFDQSxPQUFPQSxDQUFDQSxVQUFBQSxNQUFNQTtRQUM5QkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDakJBLE1BQU1BLENBQUNBO1FBQ1hBLENBQUNBO1FBQ0RBLE1BQU1BLENBQUNBLE1BQU1BLENBQUNBLE9BQU9BLENBQUNBLFVBQUFBLEtBQUtBO1lBQ3ZCQSxhQUFhQSxDQUFDQSxTQUFTQSxDQUFDQSxRQUFRQSxDQUFDQSxJQUFJQSxlQUFlQSxDQUFDQSxlQUFlQSxDQUFDQTtnQkFDakVBLFFBQVFBLEVBQUVBLFVBQUNBLFFBQVFBLEVBQUVBLElBQUlBLEVBQUVBLEdBQUdBLElBQUtBLE9BQUFBLFdBQVdBLENBQUNBLFFBQVFBLENBQUNBLFFBQVFBLEVBQUVBLElBQUlBLEVBQUVBLEdBQUdBLEVBQUVBLFdBQVdBLENBQUNBLFdBQVdBLENBQUNBLEVBQWxFQSxDQUFrRUE7Z0JBQ3JHQSxPQUFPQSxFQUFFQSxLQUFLQSxDQUFDQSxPQUFPQTtnQkFDdEJBLElBQUlBLEVBQUVBLEtBQUtBLENBQUNBLFFBQVFBLENBQUNBLElBQUlBLEdBQUdBLENBQUNBO2dCQUM3QkEsR0FBR0EsRUFBRUEsS0FBS0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsR0FBR0E7Z0JBQ3ZCQSxJQUFJQSxFQUFFQSxLQUFLQSxDQUFDQSxRQUFRQTtnQkFDcEJBLE9BQU9BLEVBQUVBLEtBQUtBLENBQUNBLE9BQU9BO2FBQ3pCQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUVKQSxBQURBQSwwQ0FBMENBO1lBQzFDQSxXQUFXQSxDQUFDQSxXQUFXQSxDQUFDQSxPQUFPQSxDQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxRQUFRQSxFQUFFQSxLQUFLQSxDQUFDQSxRQUFRQSxFQUFFQSxJQUFJQSxFQUFFQSxLQUFLQSxDQUFDQSxRQUFRQSxDQUFDQSxJQUFJQSxHQUFHQSxDQUFDQSxFQUFFQSxHQUFHQSxFQUFFQSxLQUFLQSxDQUFDQSxRQUFRQSxDQUFDQSxHQUFHQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUMvSEEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7SUFDUEEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7SUFFSEEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsV0FBV0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDN0JBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLFVBQVVBLENBQUNBLGVBQWVBLENBQUNBLENBQUNBO0lBQ25EQSxDQUFDQTtJQUNEQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxXQUFXQSxDQUFDQSxNQUFNQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUNyQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsZ0JBQWdCQSxHQUFHQSxXQUFXQSxDQUFDQSxNQUFNQSxDQUFDQSxVQUFVQSxHQUFHQSxTQUFTQSxDQUFDQSxDQUFDQTtJQUM5RkEsQ0FBQ0E7SUFBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7UUFDSkEsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsbUNBQW1DQSxDQUFDQSxDQUFDQTtJQUN2RUEsQ0FBQ0E7QUFDTEEsQ0FBQ0E7QUF4Q2Usc0JBQWMsR0FBZCxjQXdDZixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiXG5cbi8vL3RzOmltcG9ydD11dGlsc1xuaW1wb3J0IHV0aWxzID0gcmVxdWlyZSgnLi4vbGFuZy91dGlscycpOyAvLy90czppbXBvcnQ6Z2VuZXJhdGVkXG4vLy90czppbXBvcnQ9cHJvamVjdFxuaW1wb3J0IHByb2plY3QgPSByZXF1aXJlKCcuLi9sYW5nL2NvcmUvcHJvamVjdCcpOyAvLy90czppbXBvcnQ6Z2VuZXJhdGVkXG5cbmltcG9ydCBvcyA9IHJlcXVpcmUoJ29zJylcblxuaW1wb3J0IG1haW5QYW5lbFZpZXcgPSByZXF1aXJlKCcuL3ZpZXdzL21haW5QYW5lbFZpZXcnKTtcbmltcG9ydCBsaW5lTWVzc2FnZVZpZXcgPSByZXF1aXJlKCcuL3ZpZXdzL2xpbmVNZXNzYWdlVmlldycpO1xuaW1wb3J0IGdvdG9IaXN0b3J5ID0gcmVxdWlyZSgnLi9nb3RvSGlzdG9yeScpO1xuXG5mdW5jdGlvbiBnZXRUaXRsZShlcnJvckNvdW50OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHZhciB0aXRsZSA9ICc8c3BhbiBjbGFzcz1cImljb24tY2lyY3VpdC1ib2FyZFwiPjwvc3Bhbj4gVHlwZVNjcmlwdCBCdWlsZCc7XG4gICAgaWYgKGVycm9yQ291bnQgPiAwKSB7XG4gICAgICAgIHRpdGxlID0gdGl0bGUgKyBgIChcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1oaWdobGlnaHRcIiBzdHlsZT1cImZvbnQtd2VpZ2h0OiBib2xkXCI+ICR7ZXJyb3JDb3VudH0gPC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LWVycm9yXCIgc3R5bGU9XCJmb250LXdlaWdodDogYm9sZDtcIj4gZXJyb3Ike2Vycm9yQ291bnQgPT09IDEgPyBcIlwiIDogXCJzXCJ9IDwvc3Bhbj5cbiAgICAgICAgKWA7XG4gICAgfVxuICAgIHJldHVybiB0aXRsZTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gc2V0QnVpbGRPdXRwdXQoYnVpbGRPdXRwdXQ6IEJ1aWxkT3V0cHV0KSB7XG5cbiAgICBtYWluUGFuZWxWaWV3LnBhbmVsVmlldy5jbGVhckJ1aWxkKCk7XG5cbiAgICBpZiAoYnVpbGRPdXRwdXQuY291bnRzLmVycm9ycykge1xuICAgICAgICBtYWluUGFuZWxWaWV3LnBhbmVsVmlldy5zZXRCdWlsZFBhbmVsQ291bnQoYnVpbGRPdXRwdXQuY291bnRzLmVycm9ycyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtYWluUGFuZWxWaWV3LnBhbmVsVmlldy5zZXRCdWlsZFBhbmVsQ291bnQoMCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSB0aGUgZXJyb3JzIGxpc3QgZm9yIGdvdG8gaGlzdG9yeVxuICAgIGdvdG9IaXN0b3J5LmJ1aWxkT3V0cHV0Lm1lbWJlcnMgPSBbXTtcblxuICAgIGJ1aWxkT3V0cHV0Lm91dHB1dHMuZm9yRWFjaChvdXRwdXQgPT4ge1xuICAgICAgICBpZiAob3V0cHV0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBvdXRwdXQuZXJyb3JzLmZvckVhY2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgbWFpblBhbmVsVmlldy5wYW5lbFZpZXcuYWRkQnVpbGQobmV3IGxpbmVNZXNzYWdlVmlldy5MaW5lTWVzc2FnZVZpZXcoe1xuICAgICAgICAgICAgICAgIGdvVG9MaW5lOiAoZmlsZVBhdGgsIGxpbmUsIGNvbCkgPT4gZ290b0hpc3RvcnkuZ290b0xpbmUoZmlsZVBhdGgsIGxpbmUsIGNvbCwgZ290b0hpc3RvcnkuYnVpbGRPdXRwdXQpLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgbGluZTogZXJyb3Iuc3RhcnRQb3MubGluZSArIDEsXG4gICAgICAgICAgICAgICAgY29sOiBlcnJvci5zdGFydFBvcy5jb2wsXG4gICAgICAgICAgICAgICAgZmlsZTogZXJyb3IuZmlsZVBhdGgsXG4gICAgICAgICAgICAgICAgcHJldmlldzogZXJyb3IucHJldmlld1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBlcnJvcnMgbGlzdCBmb3IgZ290byBoaXN0b3J5XG4gICAgICAgICAgICBnb3RvSGlzdG9yeS5idWlsZE91dHB1dC5tZW1iZXJzLnB1c2goeyBmaWxlUGF0aDogZXJyb3IuZmlsZVBhdGgsIGxpbmU6IGVycm9yLnN0YXJ0UG9zLmxpbmUgKyAxLCBjb2w6IGVycm9yLnN0YXJ0UG9zLmNvbCB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpZiAoIWJ1aWxkT3V0cHV0LmNvdW50cy5lcnJvcnMpIHtcbiAgICAgICAgYXRvbS5ub3RpZmljYXRpb25zLmFkZFN1Y2Nlc3MoXCJCdWlsZCBzdWNjZXNzXCIpO1xuICAgIH1cbiAgICBlbHNlIGlmIChidWlsZE91dHB1dC5jb3VudHMuZW1pdEVycm9ycykge1xuICAgICAgICBhdG9tLm5vdGlmaWNhdGlvbnMuYWRkRXJyb3IoXCJFbWl0cyBlcnJvcnM6IFwiICsgYnVpbGRPdXRwdXQuY291bnRzLmVtaXRFcnJvcnMgKyBcIiBmaWxlcy5cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYXRvbS5ub3RpZmljYXRpb25zLmFkZFdhcm5pbmcoJ0NvbXBpbGUgZmFpbGVkIGJ1dCBlbWl0IHN1Y2NlZWRlZCcpO1xuICAgIH1cbn1cbiJdfQ==
//# sourceURL=/home/stefano/.atom/packages/atom-typescript/lib/main/atom/buildView.ts
